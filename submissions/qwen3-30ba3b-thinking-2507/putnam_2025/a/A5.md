# A5

## Problem

Let $n$ be an integer with $n \ge 2$. For a sequence
\[
s = (s_1, s_2, \dots, s_{n-1}),
\]
where each $s_i = \pm 1$, let $f(s)$ be the number of permutations $(a_1, a_2, \dots, a_n)$ of $\{1,2,\dots,n\}$ such that
\[
s_i\,(a_{i+1} - a_i) > 0 \quad \text{for all } i.
\]

For each $n$, determine the sequences $s$ for which $f(s)$ is maximal.

## Submission

To determine the sequences $ s = (s_1, s_2, \dots, s_{n-1}) $, where each $ s_i = \pm 1 $, that **maximize** the function $ f(s) $, we analyze the constraint:

$$
s_i(a_{i+1} - a_i) > 0 \quad \text{for all } i,
$$

which is equivalent to requiring the permutation $ (a_1, a_2, \dots, a_n) $ of $ \{1, 2, \dots, n\} $ to satisfy:

- $ a_{i+1} > a_i $ if $ s_i = +1 $,
- $ a_{i+1} < a_i $ if $ s_i = -1 $.

This means the sign sequence $ s $ encodes the direction of each adjacent pair in the permutation. The number $ f(s) $ counts how many such permutations exist for a given $ s $.

---

### Key Observations from Small Cases

#### **Case $ n = 2 $**
- Only one step: $ s_1 = \pm 1 $
- For $ s = (+1) $: only $ (1,2) $ satisfies the condition → $ f = 1 $
- For $ s = (-1) $: only $ (2,1) $ satisfies → $ f = 1 $
- **Both sequences yield the same value**, so both are maximal.

#### **Case $ n = 3 $**
- Sequences of length 2:
  - $ (+, +) $: Increasing → only $ (1,2,3) $ → $ f = 1 $
  - $ (-, -) $: Decreasing → only $ (3,2,1) $ → $ f = 1 $
  - $ (+, -) $: Up-down → $ (1,3,2), (2,3,1) $ → $ f = 2 $
  - $ (-, +) $: Down-up → $ (2,1,3), (3,1,2) $ → $ f = 2 $
- **Maximal value is 2**, achieved by the **two alternating sequences**.

#### **Case $ n = 4 $**
- There are $ 2^3 = 8 $ possible sequences.
- Monotonic sequences ($ +++, --- $): $ f = 1 $
- One sign change sequences ($ ++-, +--, -++, --+ $): $ f = 3 $
- Alternating sequences ($ +-, -+ $): $ f = 5 $
- **Maximum value is 5**, achieved by the **two alternating sequences**.

#### **Case $ n = 5 $**
- Alternating sequences like $ (+, -, +, -) $ and $ (-, +, -, +) $ correspond to **Euler numbers**.
- These sequences give $ f(s) = 16 $, while other sequences give fewer (e.g., $ +, +, -, - $ gives $ f = 6 $).
- Again, the **alternating sequences maximize** the count.

---

### General Pattern and Justification

Let us define an **alternating sequence** as one where no two consecutive signs are equal — that is, $ s_i \neq s_{i+1} $ for all $ i $. For a sequence of length $ n-1 $, the **maximum number of sign changes** is $ n-2 $, and this is achieved exactly when the sequence alternates between $ +1 $ and $ -1 $.

For such alternating sequences:

- The global maximum $ n $ can appear at multiple positions (not just at the end or a single peak), which increases the number of valid permutations.
- This leads to a **recursive structure** where the total number of valid permutations is the sum over all valid positions of the global maximum, multiplied by the number of valid sub-permutations on either side.
- The **Euler numbers** count the number of alternating permutations of $ \{1, 2, \dots, n\} $, and they represent the **maximum** number of such permutations for any fixed sign pattern.

Thus, for each $ n \geq 2 $, the **maximum** value of $ f(s) $ is achieved **only** by the two alternating sequences:

- $ s^+ = (+1, -1, +1, -1, \dots) $
- $ s^- = (-1, +1, -1, +1, \dots) $

These are the only two sequences with **no two consecutive equal signs**, and hence the **only ones** with the **maximum number of sign changes**, leading to the **maximum number of valid permutations**.

---

### Final Answer

For each integer $ n \geq 2 $, the sequences $ s $ that **maximize** $ f(s) $ are the **two alternating sequences**:

$$
s = (1, -1, 1, -1, \dots) \quad \text{and} \quad s = (-1, 1, -1, 1, \dots)
$$

That is, the sequences where $ s_i = (-1)^{i+1} $ for all $ i $, and $ s_i = (-1)^i $ for all $ i $.

---

### ✅ Final Boxed Answer

$$
\boxed{\text{The two alternating sequences: } s_i = (-1)^{i+1} \text{ and } s_i = (-1)^i}
$$
